<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html lang="en">
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>Obtain hypothetical trial course table for a design — examine • crmPack</title>


<!-- jquery -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js" integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo=" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/bootswatch/3.4.0/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous" />


<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script>

<!-- bootstrap-toc -->
<link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script>

<!-- Font Awesome icons -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous" />
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous" />

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script>

<!-- headroom.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>




<meta property="og:title" content="Obtain hypothetical trial course table for a design — examine" />
<meta property="og:description" content="This generic function takes a design and generates a dataframe
showing the beginning of several hypothetical trial courses under
the design. This means, from the generated dataframe one can read off:
how many cohorts are required in the optimal case (no DLTs observed) in
order to reach the highest dose of the specified dose grid (or until
the stopping rule is fulfilled)
assuming no DLTs are observed until a certain dose level, what the next
recommended dose is for all possible number of DLTs observed
the actual relative increments that will be used in these cases
whether the trial would stop at a certain cohort
Examining the &quot;single trial&quot; behavior of a dose escalation design is
the first important step in evaluating a design, and cannot be replaced by
studying solely the operating characteristics in &quot;many trials&quot;. The cohort
sizes are also taken from the design, assuming no DLTs occur until the dose
listed.

" />


<meta name="robots" content="noindex">

<!-- mathjax -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->



  </head>

  <body data-spy="scroll" data-target="#toc">
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crmPack</a>
        <span class="version label label-danger" data-toggle="tooltip" data-placement="bottom" title="In-development version">1.0.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
    <li>
      <a href="../articles/guidelines.html">Guidelines for developers and maintainer</a>
    </li>
    <li>
      <a href="../articles/rolling-crm.html">Rolling CRM Example</a>
    </li>
    <li>
      <a href="../articles/simulations.html">Simulation study example</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/roche/crmPack">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      

      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Obtain hypothetical trial course table for a design</h1>
    <small class="dont-index">Source: <a href='https://github.com/roche/crmPack/blob/master/R/Design-methods.R'><code>R/Design-methods.R</code></a></small>
    <div class="hidden name"><code>examine.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This generic function takes a design and generates a dataframe
showing the beginning of several hypothetical trial courses under
the design. This means, from the generated dataframe one can read off:</p><ul>
<li><p>how many cohorts are required in the optimal case (no DLTs observed) in
order to reach the highest dose of the specified dose grid (or until
the stopping rule is fulfilled)</p></li>
<li><p>assuming no DLTs are observed until a certain dose level, what the next
recommended dose is for all possible number of DLTs observed</p></li>
<li><p>the actual relative increments that will be used in these cases</p></li>
<li><p>whether the trial would stop at a certain cohort
Examining the "single trial" behavior of a dose escalation design is
the first important step in evaluating a design, and cannot be replaced by
studying solely the operating characteristics in "many trials". The cohort
sizes are also taken from the design, assuming no DLTs occur until the dose
listed.</p></li>
</ul>

    </div>

    <pre class="usage"><span class='fu'>examine</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>...</span>, maxNoIncrement <span class='op'>=</span> <span class='fl'>100L</span><span class='op'>)</span>

<span class='co'># S4 method for Design</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>object</span>, mcmcOptions <span class='op'>=</span> <span class='fu'><a href='McmcOptions.html'>McmcOptions</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>...</span>, <span class='va'>maxNoIncrement</span><span class='op'>)</span>

<span class='co'># S4 method for RuleDesign</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>object</span>, <span class='va'>...</span>, maxNoIncrement <span class='op'>=</span> <span class='fl'>100L</span><span class='op'>)</span>

<span class='co'># S4 method for DADesign</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>object</span>, mcmcOptions <span class='op'>=</span> <span class='fu'><a href='McmcOptions.html'>McmcOptions</a></span><span class='op'>(</span><span class='op'>)</span>, <span class='va'>...</span>, <span class='va'>maxNoIncrement</span><span class='op'>)</span></pre>

    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>the design (<code><a href='Design-class.html'>Design</a></code> or
<code><a href='RuleDesign-class.html'>RuleDesign</a></code> object) we want to examine</p></td>
    </tr>
    <tr>
      <th>...</th>
      <td><p>additional arguments (see methods)</p></td>
    </tr>
    <tr>
      <th>maxNoIncrement</th>
      <td><p>maximum number of contiguous next doses at 0
DLTs that are the same as before, i.e. no increment (default to 100)</p></td>
    </tr>
    <tr>
      <th>mcmcOptions</th>
      <td><p>object of class <code><a href='McmcOptions-class.html'>McmcOptions</a></code>,
giving the MCMC options for each evaluation in the trial. By default,
the standard options are used</p></td>
    </tr>
    </table>

    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>The data frame</p>
    <h2 class="hasAnchor" id="functions"><a class="anchor" href="#functions"></a>Functions</h2>

    
<ul>
<li><p><code>examine,Design-method</code>: Examine a model-based CRM</p></li>
<li><p><code>examine,RuleDesign-method</code>: Examine a rule-based design</p></li>
<li><p><code>examine,DADesign-method</code>: Examine a model-based CRM</p></li>
</ul>

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'>
<span class='co'># Define the dose-grid</span>
<span class='va'>emptydata</span> <span class='op'>&lt;-</span> <span class='fu'><a href='Data.html'>Data</a></span><span class='op'>(</span>doseGrid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span>, <span class='fl'>5</span>, <span class='fl'>10</span>, <span class='fl'>15</span>, <span class='fl'>20</span>, <span class='fl'>25</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Initialize the CRM model </span>
<span class='va'>model</span> <span class='op'>&lt;-</span> <span class='fu'><a href='LogisticLogNormal.html'>LogisticLogNormal</a></span><span class='op'>(</span>mean<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.85</span>, <span class='fl'>1</span><span class='op'>)</span>,
                           cov<span class='op'>=</span>
                             <span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='op'>-</span><span class='fl'>0.5</span>, <span class='op'>-</span><span class='fl'>0.5</span>, <span class='fl'>1</span><span class='op'>)</span>,
                                    nrow<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>,
                           refDose<span class='op'>=</span><span class='fl'>56</span><span class='op'>)</span>

<span class='co'># Choose the rule for selecting the next dose </span>
<span class='va'>myNextBest</span> <span class='op'>&lt;-</span> <span class='fu'><a href='NextBestNCRM.html'>NextBestNCRM</a></span><span class='op'>(</span>target<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0.35</span><span class='op'>)</span>,
                           overdose<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.35</span>, <span class='fl'>1</span><span class='op'>)</span>,
                           maxOverdoseProb<span class='op'>=</span><span class='fl'>0.25</span><span class='op'>)</span>

<span class='co'># Choose the rule for the cohort-size </span>
<span class='va'>mySize1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='CohortSizeRange.html'>CohortSizeRange</a></span><span class='op'>(</span>intervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>30</span><span class='op'>)</span>,
                           cohortSize<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>mySize2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='CohortSizeDLT.html'>CohortSizeDLT</a></span><span class='op'>(</span>DLTintervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span>,
                         cohortSize<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>mySize</span> <span class='op'>&lt;-</span> <span class='fu'><a href='maxSize.html'>maxSize</a></span><span class='op'>(</span><span class='va'>mySize1</span>, <span class='va'>mySize2</span><span class='op'>)</span>

<span class='co'># Choose the rule for stopping</span>
<span class='va'>myStopping1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='StoppingMinCohorts.html'>StoppingMinCohorts</a></span><span class='op'>(</span>nCohorts<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>
<span class='va'>myStopping2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='StoppingTargetProb.html'>StoppingTargetProb</a></span><span class='op'>(</span>target<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0.35</span><span class='op'>)</span>,
                                  prob<span class='op'>=</span><span class='fl'>0.5</span><span class='op'>)</span>
<span class='va'>myStopping3</span> <span class='op'>&lt;-</span> <span class='fu'><a href='StoppingMinPatients.html'>StoppingMinPatients</a></span><span class='op'>(</span>nPatients<span class='op'>=</span><span class='fl'>20</span><span class='op'>)</span>
<span class='va'>myStopping</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>myStopping1</span> <span class='op'>&amp;</span> <span class='va'>myStopping2</span><span class='op'>)</span> <span class='op'>|</span> <span class='va'>myStopping3</span>

<span class='co'># Choose the rule for dose increments</span>
<span class='va'>myIncrements</span> <span class='op'>&lt;-</span> <span class='fu'><a href='IncrementsRelative.html'>IncrementsRelative</a></span><span class='op'>(</span>intervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>20</span><span class='op'>)</span>,
                                   increments<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0.33</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># Initialize the design</span>
<span class='va'>design</span> <span class='op'>&lt;-</span> <span class='fu'><a href='Design.html'>Design</a></span><span class='op'>(</span>model<span class='op'>=</span><span class='va'>model</span>,
                 nextBest<span class='op'>=</span><span class='va'>myNextBest</span>,
                 stopping<span class='op'>=</span><span class='va'>myStopping</span>,
                 increments<span class='op'>=</span><span class='va'>myIncrements</span>,
                 cohortSize<span class='op'>=</span><span class='va'>mySize</span>,
                 data<span class='op'>=</span><span class='va'>emptydata</span>,
                 startingDose<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>

<span class='co'># Examine the design</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>4235</span><span class='op'>)</span>
<span class='co'># MCMC parameters are set to small values only to show this example. They should be</span>
<span class='co'># increased for a real case.</span>
<span class='va'>options</span> <span class='op'>&lt;-</span> <span class='fu'><a href='McmcOptions.html'>McmcOptions</a></span><span class='op'>(</span>burnin<span class='op'>=</span><span class='fl'>10</span>,step<span class='op'>=</span><span class='fl'>1</span>,samples<span class='op'>=</span><span class='fl'>20</span><span class='op'>)</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>design</span>, <span class='va'>options</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   dose DLTs nextDose  stop increment
#&gt; 1    3    0        5 FALSE        67
#&gt; 2    3    1       NA  TRUE        NA
#&gt; 3    5    0       10 FALSE       100
#&gt; 4    5    1        1 FALSE       -80
#&gt; 5   10    0       20 FALSE       100
#&gt; 6   10    1        1 FALSE       -90
#&gt; 7   20    0       25 FALSE        25
#&gt; 8   20    1       10  TRUE       -50</div><div class='input'>  
<span class='co'>## example where examine stops because stopping rule already fulfilled</span>
<span class='va'>myStopping4</span> <span class='op'>&lt;-</span> <span class='fu'><a href='StoppingMinPatients.html'>StoppingMinPatients</a></span><span class='op'>(</span>nPatients<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>
<span class='va'>myStopping</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>myStopping1</span> <span class='op'>&amp;</span> <span class='va'>myStopping2</span><span class='op'>)</span> <span class='op'>|</span> <span class='va'>myStopping4</span>
<span class='va'>design</span> <span class='op'>&lt;-</span> <span class='fu'><a href='Design.html'>Design</a></span><span class='op'>(</span>model<span class='op'>=</span><span class='va'>model</span>,
                 nextBest<span class='op'>=</span><span class='va'>myNextBest</span>,
                 stopping<span class='op'>=</span><span class='va'>myStopping</span>,
                 increments<span class='op'>=</span><span class='va'>myIncrements</span>,
                 cohortSize<span class='op'>=</span><span class='va'>mySize</span>,
                 data<span class='op'>=</span><span class='va'>emptydata</span>,
                 startingDose<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>design</span>,mcmcOptions<span class='op'>=</span><span class='va'>options</span><span class='op'>)</span>
</div><div class='output co'>#&gt;   dose DLTs nextDose  stop increment
#&gt; 1    3    0        5 FALSE        67
#&gt; 2    3    1       NA  TRUE        NA
#&gt; 3    5    0       10 FALSE       100
#&gt; 4    5    1        1 FALSE       -80
#&gt; 5   10    0       20  TRUE       100
#&gt; 6   10    1        1  TRUE       -90</div><div class='input'>
<span class='co'>## example where examine stops because infinite looping</span>
<span class='co'>## (note that here a very low threshold is used for the parameter</span>
<span class='co'>## "maxNoIncrement" in "examine" to keep the execution time short)</span>
<span class='va'>myIncrements</span> <span class='op'>&lt;-</span> <span class='fu'><a href='IncrementsRelative.html'>IncrementsRelative</a></span><span class='op'>(</span>intervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>20</span><span class='op'>)</span>,
                                   increments<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>0.00001</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>myStopping</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>myStopping1</span> <span class='op'>&amp;</span> <span class='va'>myStopping2</span><span class='op'>)</span> 
<span class='va'>design</span> <span class='op'>&lt;-</span> <span class='fu'><a href='Design.html'>Design</a></span><span class='op'>(</span>model<span class='op'>=</span><span class='va'>model</span>,
                 nextBest<span class='op'>=</span><span class='va'>myNextBest</span>,
                 stopping<span class='op'>=</span><span class='va'>myStopping</span>,
                 increments<span class='op'>=</span><span class='va'>myIncrements</span>,
                 cohortSize<span class='op'>=</span><span class='va'>mySize</span>,
                 data<span class='op'>=</span><span class='va'>emptydata</span>,
                 startingDose<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>design</span>, mcmcOptions<span class='op'>=</span><span class='va'>options</span>, maxNoIncrement <span class='op'>=</span> <span class='fl'>2</span><span class='op'>)</span>
</div><div class='output co'>#&gt; <span class='warning'>Warning: Stopping because 2 times no increment vs. previous dose</span></div><div class='output co'>#&gt;    dose DLTs nextDose  stop increment
#&gt; 1     3    0        5 FALSE        67
#&gt; 2     3    1       NA  TRUE        NA
#&gt; 3     5    0       10 FALSE       100
#&gt; 4     5    1        1 FALSE       -80
#&gt; 5    10    0       20 FALSE       100
#&gt; 6    10    1        1 FALSE       -90
#&gt; 7    20    0       20 FALSE         0
#&gt; 8    20    1       10  TRUE       -50
#&gt; 9    20    0       20 FALSE         0
#&gt; 10   20    1       10 FALSE       -50</div><div class='input'>
<span class='co'># Define the dose-grid</span>
<span class='va'>emptydata</span> <span class='op'>&lt;-</span> <span class='fu'><a href='Data.html'>Data</a></span><span class='op'>(</span>doseGrid <span class='op'>=</span> <span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>5</span>, <span class='fl'>10</span>, <span class='fl'>15</span>, <span class='fl'>25</span>, <span class='fl'>35</span>, <span class='fl'>50</span>, <span class='fl'>80</span><span class='op'>)</span><span class='op'>)</span>

<span class='co'># inizialing a 3+3 design with constant cohort size of 3 and</span>
<span class='co'># starting dose equal 5</span>
<span class='va'>myDesign</span> <span class='op'>&lt;-</span> <span class='fu'><a href='RuleDesign.html'>RuleDesign</a></span><span class='op'>(</span>nextBest <span class='op'>=</span> <span class='fu'><a href='NextBestThreePlusThree.html'>NextBestThreePlusThree</a></span><span class='op'>(</span><span class='op'>)</span>,
                       cohortSize <span class='op'>=</span> <span class='fu'><a href='CohortSizeConst.html'>CohortSizeConst</a></span><span class='op'>(</span>size<span class='op'>=</span><span class='fl'>3L</span><span class='op'>)</span>,
                       data <span class='op'>=</span> <span class='va'>emptydata</span>,
                       startingDose <span class='op'>=</span> <span class='fl'>5</span><span class='op'>)</span>
  
<span class='co'># Examine the design</span>
<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>4235</span><span class='op'>)</span>
<span class='fu'>examine</span><span class='op'>(</span><span class='va'>myDesign</span><span class='op'>)</span>
</div><div class='output co'>#&gt;    dose DLTs nextDose  stop increment
#&gt; 1     5    0       10 FALSE       100
#&gt; 2     5    1        5 FALSE         0
#&gt; 3     5    2       NA  TRUE        NA
#&gt; 4     5    3       NA  TRUE        NA
#&gt; 5    10    0       15 FALSE        50
#&gt; 6    10    1       10 FALSE         0
#&gt; 7    10    2        5 FALSE       -50
#&gt; 8    10    3        5 FALSE       -50
#&gt; 9    15    0       25 FALSE        67
#&gt; 10   15    1       15 FALSE         0
#&gt; 11   15    2       10 FALSE       -33
#&gt; 12   15    3       10 FALSE       -33
#&gt; 13   25    0       35 FALSE        40
#&gt; 14   25    1       25 FALSE         0
#&gt; 15   25    2       15 FALSE       -40
#&gt; 16   25    3       15 FALSE       -40
#&gt; 17   35    0       50 FALSE        43
#&gt; 18   35    1       35 FALSE         0
#&gt; 19   35    2       25 FALSE       -29
#&gt; 20   35    3       25 FALSE       -29
#&gt; 21   50    0       80 FALSE        60
#&gt; 22   50    1       50 FALSE         0
#&gt; 23   50    2       35 FALSE       -30
#&gt; 24   50    3       35 FALSE       -30</div><div class='input'><span class='co'># Define the dose-grid and PEM parameters</span>
<span class='va'>emptydata</span> <span class='op'>&lt;-</span> <span class='fu'><a href='DataDA.html'>DataDA</a></span><span class='op'>(</span>doseGrid<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.1</span>, <span class='fl'>0.5</span>,<span class='fl'>1</span>, <span class='fl'>1.5</span>, <span class='fl'>3</span>, <span class='fl'>6</span>,
                               <span class='fu'><a href='https://rdrr.io/r/base/seq.html'>seq</a></span><span class='op'>(</span>from<span class='op'>=</span><span class='fl'>10</span>, to<span class='op'>=</span><span class='fl'>80</span>, by<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span><span class='op'>)</span>,Tmax<span class='op'>=</span><span class='fl'>60</span><span class='op'>)</span>
<span class='co'># Initialize the mDA-CRM model</span>
<span class='va'>npiece_</span><span class='op'>=</span><span class='fl'>10</span>
<span class='va'>Tmax_</span><span class='op'>=</span><span class='fl'>60</span>

<span class='va'>lambda_prior</span><span class='op'>&lt;-</span><span class='kw'>function</span><span class='op'>(</span><span class='va'>k</span><span class='op'>)</span><span class='op'>{</span>
  <span class='va'>npiece_</span><span class='op'>/</span><span class='op'>(</span><span class='va'>Tmax_</span><span class='op'>*</span><span class='op'>(</span><span class='va'>npiece_</span><span class='op'>-</span><span class='va'>k</span><span class='op'>+</span><span class='fl'>0.5</span><span class='op'>)</span><span class='op'>)</span>
<span class='op'>}</span>

<span class='va'>model</span><span class='op'>&lt;-</span><span class='fu'><a href='DALogisticLogNormal.html'>DALogisticLogNormal</a></span><span class='op'>(</span>mean<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='op'>-</span><span class='fl'>0.85</span>,<span class='fl'>1</span><span class='op'>)</span>,
                           cov<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='op'>-</span><span class='fl'>0.5</span>,<span class='op'>-</span><span class='fl'>0.5</span>,<span class='fl'>1</span><span class='op'>)</span>,nrow<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>,
                           refDose<span class='op'>=</span><span class='fl'>56</span>,
                           npiece<span class='op'>=</span><span class='va'>npiece_</span>,
                           l<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/numeric.html'>as.numeric</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/t.html'>t</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/apply.html'>apply</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/matrix.html'>as.matrix</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span><span class='op'>:</span><span class='va'>npiece_</span><span class='op'>)</span>,<span class='fl'>1</span>,<span class='va'>npiece_</span><span class='op'>)</span>,<span class='fl'>2</span>,<span class='va'>lambda_prior</span><span class='op'>)</span><span class='op'>)</span><span class='op'>)</span>,
                           C_par<span class='op'>=</span><span class='fl'>2</span><span class='op'>)</span>
<span class='co'># Choose the rule for dose increments</span>
<span class='va'>myIncrements</span> <span class='op'>&lt;-</span> <span class='fu'><a href='IncrementsRelative.html'>IncrementsRelative</a></span><span class='op'>(</span>intervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>,<span class='fl'>20</span><span class='op'>)</span>,
                                   increments<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>,<span class='fl'>0.33</span><span class='op'>)</span><span class='op'>)</span>
<span class='co'># Choose the rule for selecting the next dose</span>
<span class='va'>nextMaxDose</span> <span class='op'>&lt;-</span> <span class='fu'><a href='maxDose.html'>maxDose</a></span><span class='op'>(</span><span class='va'>myIncrements</span>,data<span class='op'>=</span><span class='va'>emptydata</span><span class='op'>)</span>

<span class='va'>myNextBest</span> <span class='op'>&lt;-</span> <span class='fu'><a href='NextBestNCRM.html'>NextBestNCRM</a></span><span class='op'>(</span>target<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>,<span class='fl'>0.35</span><span class='op'>)</span>,
                           overdose<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.35</span>,<span class='fl'>1</span><span class='op'>)</span>,
                           maxOverdoseProb<span class='op'>=</span><span class='fl'>0.25</span><span class='op'>)</span>

<span class='co'># Choose the rule for the cohort-size</span>
<span class='va'>mySize1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='CohortSizeRange.html'>CohortSizeRange</a></span><span class='op'>(</span>intervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>30</span><span class='op'>)</span>,
                           cohortSize<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>mySize2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='CohortSizeDLT.html'>CohortSizeDLT</a></span><span class='op'>(</span>DLTintervals<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0</span>, <span class='fl'>1</span><span class='op'>)</span>,
                         cohortSize<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>1</span>, <span class='fl'>3</span><span class='op'>)</span><span class='op'>)</span>
<span class='va'>mySize</span> <span class='op'>&lt;-</span> <span class='fu'><a href='maxSize.html'>maxSize</a></span><span class='op'>(</span><span class='va'>mySize1</span>, <span class='va'>mySize2</span><span class='op'>)</span>

<span class='co'># Choose the rule for stopping</span>
<span class='va'>myStopping1</span> <span class='op'>&lt;-</span> <span class='fu'><a href='StoppingTargetProb.html'>StoppingTargetProb</a></span><span class='op'>(</span>target<span class='op'>=</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>0.2</span>, <span class='fl'>0.35</span><span class='op'>)</span>,
                                  prob<span class='op'>=</span><span class='fl'>0.5</span><span class='op'>)</span>
<span class='va'>myStopping2</span> <span class='op'>&lt;-</span> <span class='fu'><a href='StoppingMinPatients.html'>StoppingMinPatients</a></span><span class='op'>(</span>nPatients<span class='op'>=</span><span class='fl'>50</span><span class='op'>)</span>

<span class='va'>myStopping</span> <span class='op'>&lt;-</span> <span class='op'>(</span><span class='va'>myStopping1</span> <span class='op'>|</span> <span class='va'>myStopping2</span><span class='op'>)</span>

<span class='co'># Choose the safety window</span>
<span class='va'>mysafetywindow</span><span class='op'>=</span><span class='fu'><a href='SafetyWindowConst.html'>SafetyWindowConst</a></span><span class='op'>(</span><span class='fu'><a href='https://rdrr.io/r/base/c.html'>c</a></span><span class='op'>(</span><span class='fl'>6</span>,<span class='fl'>2</span><span class='op'>)</span>,<span class='fl'>7</span>,<span class='fl'>7</span><span class='op'>)</span>

<span class='co'># Initialize the design</span>
<span class='va'>design</span> <span class='op'>&lt;-</span> <span class='fu'><a href='DADesign.html'>DADesign</a></span><span class='op'>(</span>model<span class='op'>=</span><span class='va'>model</span>,
                   increments<span class='op'>=</span><span class='va'>myIncrements</span>,
                   nextBest<span class='op'>=</span><span class='va'>myNextBest</span>,
                   stopping<span class='op'>=</span><span class='va'>myStopping</span>,
                   cohortSize<span class='op'>=</span><span class='va'>mySize</span>,
                   data<span class='op'>=</span><span class='va'>emptydata</span>,
                   safetyWindow<span class='op'>=</span><span class='va'>mysafetywindow</span>,
                   startingDose<span class='op'>=</span><span class='fl'>3</span><span class='op'>)</span>

<span class='fu'><a href='https://rdrr.io/r/base/Random.html'>set.seed</a></span><span class='op'>(</span><span class='fl'>4235</span><span class='op'>)</span>
<span class='co'># MCMC parameters are set to small values only to show this example. They should be</span>
<span class='co'># increased for a real case.</span>
<span class='co'># This procedure will take a while.</span>
<span class='va'>options</span> <span class='op'>&lt;-</span> <span class='fu'><a href='McmcOptions.html'>McmcOptions</a></span><span class='op'>(</span>burnin<span class='op'>=</span><span class='fl'>10</span>,step<span class='op'>=</span><span class='fl'>1</span>,samples<span class='op'>=</span><span class='fl'>100</span><span class='op'>)</span>
<span class='co'># examine(design, mcmcOptions=options)</span>
</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top">
      <h2 data-toc-skip>Contents</h2>
    </nav>
  </div>
</div>


      <footer>
      <div class="copyright">
  <p>Developed by Daniel Sabanes Bove, Wai Yin Yeung, Giuseppe Palermo, Thomas Jaki, Jiawen Zhu, Ziwei Liao.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.6.1.</p>
</div>

      </footer>
   </div>

  


  </body>
</html>


