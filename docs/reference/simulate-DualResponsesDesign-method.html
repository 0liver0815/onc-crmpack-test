<!-- Generated by pkgdown: do not edit by hand -->
<!DOCTYPE html>
<html>
  <head>
  <meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<title>This is a methods to simulate dose escalation procedure using both DLE and efficacy responses.
This is a method based on the <code><a href='DualResponsesDesign-class.html'>DualResponsesDesign</a></code> where DLEmodel used are of
<code><a href='ModelTox-class.html'>ModelTox</a></code> class object and efficacy model used are of <code><a href='ModelEff-class.html'>ModelEff</a></code>
class object. In addition, no DLE and efficacy samples are involved or generated in the simulation 
process — simulate,DualResponsesDesign-method • crmPack</title>

<!-- jquery -->
<script src="https://code.jquery.com/jquery-3.1.0.min.js" integrity="sha384-nrOSfDHtoPMzJHjVTdCopGqIqeYETSXhZDFyniQ8ZHcVy08QesyHcnOUpMpqnmWq" crossorigin="anonymous"></script>
<!-- Bootstrap -->
<link href="https://maxcdn.bootstrapcdn.com/bootswatch/3.3.7/cerulean/bootstrap.min.css" rel="stylesheet" crossorigin="anonymous">

<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>

<!-- Font Awesome icons -->
<link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.6.3/css/font-awesome.min.css" rel="stylesheet" integrity="sha384-T8Gy5hrqNKT+hzMclPo118YTQO6cYprQmhrYwIiQ/3axmI1hQomh7Ud2hPOy8SP1" crossorigin="anonymous">

<!-- clipboard.js -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/1.7.1/clipboard.min.js" integrity="sha384-cV+rhyOuRHc9Ub/91rihWcGmMmCXDeksTtCihMupQHSsi8GIIRDG0ThDc3HGQFJ3" crossorigin="anonymous"></script>

<!-- sticky kit -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/sticky-kit/1.1.3/sticky-kit.min.js" integrity="sha256-c4Rlo1ZozqTPE2RLuvbusY3+SU1pQaJC0TjuhygMipw=" crossorigin="anonymous"></script>

<!-- pkgdown -->
<link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script>



<meta property="og:title" content="This is a methods to simulate dose escalation procedure using both DLE and efficacy responses.
This is a method based on the <code><a href='DualResponsesDesign-class.html'>DualResponsesDesign</a></code> where DLEmodel used are of
<code><a href='ModelTox-class.html'>ModelTox</a></code> class object and efficacy model used are of <code><a href='ModelEff-class.html'>ModelEff</a></code>
class object. In addition, no DLE and efficacy samples are involved or generated in the simulation 
process — simulate,DualResponsesDesign-method" />

<meta property="og:description" content="This is a methods to simulate dose escalation procedure using both DLE and efficacy responses.
This is a method based on the DualResponsesDesign where DLEmodel used are of
ModelTox class object and efficacy model used are of ModelEff
class object. In addition, no DLE and efficacy samples are involved or generated in the simulation 
process" />
<meta name="twitter:card" content="summary" />



<!-- mathjax -->
<script src='https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML'></script>

<!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->


  </head>

  <body>
    <div class="container template-reference-topic">
      <header>
      <div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">crmPack</a>
        <span class="label label-default" data-toggle="tooltip" data-placement="bottom" title="Released package">0.2.8</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="../index.html">
    <span class="fa fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
      </ul>
      
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/roche/crmPack">
    <span class="fa fa-github fa-lg"></span>
     
  </a>
</li>
      </ul>
      
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

      
      </header>

<div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>This is a methods to simulate dose escalation procedure using both DLE and efficacy responses.
This is a method based on the <code><a href='DualResponsesDesign-class.html'>DualResponsesDesign</a></code> where DLEmodel used are of
<code><a href='ModelTox-class.html'>ModelTox</a></code> class object and efficacy model used are of <code><a href='ModelEff-class.html'>ModelEff</a></code>
class object. In addition, no DLE and efficacy samples are involved or generated in the simulation 
process</h1>
    
    <div class="hidden name"><code>simulate-DualResponsesDesign-method.Rd</code></div>
    </div>

    <div class="ref-description">
    
    <p>This is a methods to simulate dose escalation procedure using both DLE and efficacy responses.
This is a method based on the <code><a href='DualResponsesDesign-class.html'>DualResponsesDesign</a></code> where DLEmodel used are of
<code><a href='ModelTox-class.html'>ModelTox</a></code> class object and efficacy model used are of <code><a href='ModelEff-class.html'>ModelEff</a></code>
class object. In addition, no DLE and efficacy samples are involved or generated in the simulation 
process</p>
    
    </div>

    <pre class="usage"><span class='co'># S4 method for DualResponsesDesign</span>
<span class='fu'>simulate</span>(<span class='no'>object</span>, <span class='kw'>nsim</span> <span class='kw'>=</span> <span class='fl'>1L</span>, <span class='kw'>seed</span> <span class='kw'>=</span> <span class='kw'>NULL</span>,
  <span class='no'>trueDLE</span>, <span class='no'>trueEff</span>, <span class='no'>trueNu</span>, <span class='kw'>args</span> <span class='kw'>=</span> <span class='kw'>NULL</span>, <span class='kw'>firstSeparate</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>,
  <span class='kw'>parallel</span> <span class='kw'>=</span> <span class='fl'>FALSE</span>, <span class='kw'>nCores</span> <span class='kw'>=</span> <span class='kw pkg'>parallel</span><span class='kw ns'>::</span><span class='fu'><a href='http://www.rdocumentation.org/packages/parallel/topics/detectCores'>detectCores</a></span>(), <span class='no'>...</span>)</pre>
    
    <h2 class="hasAnchor" id="arguments"><a class="anchor" href="#arguments"></a>Arguments</h2>
    <table class="ref-arguments">
    <colgroup><col class="name" /><col class="desc" /></colgroup>
    <tr>
      <th>object</th>
      <td><p>the <code><a href='DualResponsesDesign-class.html'>DualResponsesDesign</a></code> object we want to simulate the data from</p></td>
    </tr>
    <tr>
      <th>nsim</th>
      <td><p>the number of simulations (default :1)</p></td>
    </tr>
    <tr>
      <th>seed</th>
      <td><p>see <code><a href='setSeed.html'>setSeed</a></code></p></td>
    </tr>
    <tr>
      <th>trueDLE</th>
      <td><p>a function which takes as input a dose (vector) and returns the true probability 
(vector) of the occurrence of a DLE. Additional arguments can be supplied in <code>args</code>.</p></td>
    </tr>
    <tr>
      <th>trueEff</th>
      <td><p>a function which takes as input a dose (vector) and returns the expected efficacy
responses (vector). Additional arguments can be supplied in <code>args</code>.</p></td>
    </tr>
    <tr>
      <th>trueNu</th>
      <td><p>the precision, the inverse of the variance of the efficacy responses</p></td>
    </tr>
    <tr>
      <th>args</th>
      <td><p>data frame with arguments for the <code>trueDLE</code> and
<code>trueEff</code> function. The column names correspond to the argument
names, the rows to the values of the arguments. The rows are appropriately
recycled in the <code>nsim</code> simulations.</p></td>
    </tr>
    <tr>
      <th>firstSeparate</th>
      <td><p>enroll the first patient separately from the rest of
the cohort? (not default) If yes, the cohort will be closed if a DLT occurs
in this patient.</p></td>
    </tr>
    <tr>
      <th>parallel</th>
      <td><p>should the simulation runs be parallelized across the
clusters of the computer? (not default)</p></td>
    </tr>
    <tr>
      <th>nCores</th>
      <td><p>how many cores should be used for parallel computing?
Defaults to the number of cores on the machine.</p></td>
    </tr>
    <tr>
      <th>&#8230;</th>
      <td><p>not used</p></td>
    </tr>
    </table>
    
    <h2 class="hasAnchor" id="value"><a class="anchor" href="#value"></a>Value</h2>

    <p>an object of class <code><a href='PseudoDualSimulations-class.html'>PseudoDualSimulations</a></code></p>
    

    <h2 class="hasAnchor" id="examples"><a class="anchor" href="#examples"></a>Examples</h2>
    <pre class="examples"><div class='input'><span class='co'>##Simulate dose-escalation procedure based on DLE and efficacy responses where no DLE </span>
<span class='co'>## and efficacy samples are used</span>
<span class='co'>## we need a data object with doses &gt;= 1:</span>
<span class='no'>data</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='DataDual.html'>DataDual</a></span>(<span class='kw'>doseGrid</span><span class='kw'>=</span><span class='fu'>seq</span>(<span class='fl'>25</span>,<span class='fl'>300</span>,<span class='fl'>25</span>),<span class='kw'>placebo</span><span class='kw'>=</span><span class='fl'>FALSE</span>)
<span class='co'>##First for the DLE model </span>
<span class='co'>##The DLE model must be of 'ModelTox' (e.g 'LogisticIndepBeta') class </span>
<span class='no'>DLEmodel</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='LogisticIndepBeta.html'>LogisticIndepBeta</a></span>(<span class='kw'>binDLE</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>1.05</span>,<span class='fl'>1.8</span>),
                              <span class='kw'>DLEweights</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>3</span>,<span class='fl'>3</span>),
                              <span class='kw'>DLEdose</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>25</span>,<span class='fl'>300</span>),
                              <span class='kw'>data</span><span class='kw'>=</span><span class='no'>data</span>)

<span class='co'>##The efficacy model of 'ModelEff' (e.g 'Effloglog') class </span>
<span class='no'>Effmodel</span><span class='kw'>&lt;-</span><span class='fu'><a href='Effloglog.html'>Effloglog</a></span>(<span class='kw'>Eff</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>1.223</span>,<span class='fl'>2.513</span>),<span class='kw'>Effdose</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>25</span>,<span class='fl'>300</span>),
                    <span class='kw'>nu</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='kw'>a</span><span class='kw'>=</span><span class='fl'>1</span>,<span class='kw'>b</span><span class='kw'>=</span><span class='fl'>0.025</span>),<span class='kw'>data</span><span class='kw'>=</span><span class='no'>data</span>,<span class='kw'>c</span><span class='kw'>=</span><span class='fl'>0</span>)

<span class='co'>##The escalation rule using the 'NextBestMaxGain' class</span>
<span class='no'>mynextbest</span><span class='kw'>&lt;-</span><span class='fu'><a href='NextBestMaxGain.html'>NextBestMaxGain</a></span>(<span class='kw'>DLEDuringTrialtarget</span><span class='kw'>=</span><span class='fl'>0.35</span>,
                            <span class='kw'>DLEEndOfTrialtarget</span><span class='kw'>=</span><span class='fl'>0.3</span>)


<span class='co'>##The increments (see Increments class examples) </span>
<span class='co'>## 200% allowable increase for dose below 300 and 200% increase for dose above 300</span>
<span class='no'>myIncrements</span><span class='kw'>&lt;-</span><span class='fu'><a href='IncrementsRelative.html'>IncrementsRelative</a></span>(<span class='kw'>intervals</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>25</span>,<span class='fl'>300</span>),
                                 <span class='kw'>increments</span><span class='kw'>=</span><span class='fu'>c</span>(<span class='fl'>2</span>,<span class='fl'>2</span>))
<span class='co'>##cohort size of 3</span>
<span class='no'>mySize</span><span class='kw'>&lt;-</span><span class='fu'><a href='CohortSizeConst.html'>CohortSizeConst</a></span>(<span class='kw'>size</span><span class='kw'>=</span><span class='fl'>3</span>)
<span class='co'>##Stop only when 36 subjects are treated</span>
<span class='no'>myStopping</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='StoppingMinPatients.html'>StoppingMinPatients</a></span>(<span class='kw'>nPatients</span><span class='kw'>=</span><span class='fl'>36</span>)
<span class='co'>##Now specified the design with all the above information and starting with a dose of 25</span>

<span class='co'>##Specified the design(for details please refer to the 'DualResponsesDesign' example)</span>
<span class='no'>design</span> <span class='kw'>&lt;-</span> <span class='fu'><a href='DualResponsesDesign.html'>DualResponsesDesign</a></span>(<span class='kw'>nextBest</span><span class='kw'>=</span><span class='no'>mynextbest</span>,
                              <span class='kw'>model</span><span class='kw'>=</span><span class='no'>DLEmodel</span>,
                              <span class='kw'>Effmodel</span><span class='kw'>=</span><span class='no'>Effmodel</span>,
                              <span class='kw'>stopping</span><span class='kw'>=</span><span class='no'>myStopping</span>,
                              <span class='kw'>increments</span><span class='kw'>=</span><span class='no'>myIncrements</span>,
                              <span class='kw'>cohortSize</span><span class='kw'>=</span><span class='no'>mySize</span>,
                              <span class='kw'>data</span><span class='kw'>=</span><span class='no'>data</span>,<span class='kw'>startingDose</span><span class='kw'>=</span><span class='fl'>25</span>)
<span class='co'>##Specify the true DLE and efficacy curves</span>
<span class='no'>myTruthDLE</span><span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>dose</span>)
{ <span class='no'>DLEmodel</span>@<span class='kw'>prob</span>(<span class='no'>dose</span>, <span class='kw'>phi1</span><span class='kw'>=</span>-<span class='fl'>53.66584</span>, <span class='kw'>phi2</span><span class='kw'>=</span><span class='fl'>10.50499</span>)
}

<span class='no'>myTruthEff</span><span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>dose</span>)
{<span class='no'>Effmodel</span>@<span class='kw'>ExpEff</span>(<span class='no'>dose</span>,<span class='kw'>theta1</span><span class='kw'>=</span>-<span class='fl'>4.818429</span>,<span class='kw'>theta2</span><span class='kw'>=</span><span class='fl'>3.653058</span>)
}

<span class='co'>##The true gain curve can also be seen</span>
<span class='no'>myTruthGain</span> <span class='kw'>&lt;-</span> <span class='kw'>function</span>(<span class='no'>dose</span>)
{<span class='fu'>return</span>((<span class='fu'>myTruthEff</span>(<span class='no'>dose</span>))/(<span class='fl'>1</span>+(<span class='fu'>myTruthDLE</span>(<span class='no'>dose</span>)/(<span class='fl'>1</span>-<span class='fu'>myTruthDLE</span>(<span class='no'>dose</span>)))))}


<span class='co'>## Then specified the simulations and generate the trial </span>
<span class='co'>##For illustration purpose only 1 simulation is produced (nsim=1). </span>
<span class='no'>options</span><span class='kw'>&lt;-</span><span class='fu'><a href='McmcOptions.html'>McmcOptions</a></span>(<span class='kw'>burnin</span><span class='kw'>=</span><span class='fl'>100</span>,<span class='kw'>step</span><span class='kw'>=</span><span class='fl'>2</span>,<span class='kw'>samples</span><span class='kw'>=</span><span class='fl'>200</span>)
<span class='no'>mySim</span> <span class='kw'>&lt;-</span><span class='fu'>simulate</span>(<span class='kw'>object</span><span class='kw'>=</span><span class='no'>design</span>,
                 <span class='kw'>args</span><span class='kw'>=</span><span class='kw'>NULL</span>,
                 <span class='kw'>trueDLE</span><span class='kw'>=</span><span class='no'>myTruthDLE</span>,
                 <span class='kw'>trueEff</span><span class='kw'>=</span><span class='no'>myTruthEff</span>,
                 <span class='kw'>trueNu</span><span class='kw'>=</span><span class='fl'>1</span>/<span class='fl'>0.025</span>,
                 <span class='kw'>nsim</span><span class='kw'>=</span><span class='fl'>1</span>,
                 <span class='kw'>seed</span><span class='kw'>=</span><span class='fl'>819</span>,
                 <span class='kw'>parallel</span><span class='kw'>=</span><span class='fl'>FALSE</span>)</div></pre>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">
    <h2>Contents</h2>
    <ul class="nav nav-pills nav-stacked">
      <li><a href="#arguments">Arguments</a></li>
      
      <li><a href="#value">Value</a></li>
      
      <li><a href="#examples">Examples</a></li>
    </ul>

  </div>
</div>

      <footer>
      <div class="copyright">
  <p>Developed by Daniel Sabanes Bove, Wai Yin Yeung, Giuseppe Palermo, Thomas Jaki.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="http://pkgdown.r-lib.org/">pkgdown</a>.</p>
</div>

      </footer>
   </div>

  

  </body>
</html>

